@model ProjectCDTT_63132701.Models.SanPham

@{
    ViewBag.Title = Model.TenSP;
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="~/Content/chitietsanpham.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>

<div class="product-detail">
    <div class="product-image">
        <img src="@Url.Content("~/Images/" + Model.AnhSanPham)" alt="@Model.TenSP">
    </div>

    <div class="product-info">
        <h2>@Model.TenSP</h2>
        <p class="price">@Model.DonGia.ToString("N0") VNĐ</p>
        <p class="description">@Model.MoTa</p>
        <p class="stock">Số lượng còn lại: @Model.SoLuong</p>
        <p class="type">Loại bạc: @Model.LoaiBac</p>

        <div class="quantity-container">
            <label for="SoLuong">Số lượng:</label>
            <button type="button" class="btn-quantity" onclick="changeQuantity(-1)">-</button>
            <input type="number" id="SoLuong" name="SoLuong" value="1" min="1" readonly />
            <button type="button" class="btn-quantity" onclick="changeQuantity(1)">+</button>
        </div>

        <form method="post" action="@Url.Action("AddToCart", "San_pham")">
            <input type="hidden" name="MaSP" value="@Model.MaSP" />
            <input type="hidden" name="SoLuong" value="1" />  <!-- Thêm số lượng mặc định -->
            <input type="hidden" name="returnUrl" value="@Request.QueryString["returnUrl"]" />

            <button type="submit" class="checkout-btn full-width">MUA NGAY<br></button>
            <button type="submit" class="add-to-cart-btn"><i class="fa fa-shopping-bag"></i> Thêm vào giỏ hàng</button>
        </form>

    </div>
</div>

<script>
    function changeQuantity(amount) {
        let input = document.getElementById("SoLuong");
        let value = parseInt(input.value) + amount;
        if (value > 0) input.value = value;
    }
</script>




<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    @if (TempData["ErrorMessage"] != null)
    {
        <text>
            Swal.fire({
                icon: 'error',
                text: '@Html.Raw(TempData["ErrorMessage"])',
                confirmButtonText: 'Đóng'
            });
        </text>
    }
</script>


